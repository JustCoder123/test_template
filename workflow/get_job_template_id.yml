---
  - block:
      - include_vars: vars.yml
      
      - name: Getting job template ID.
        uri:
          url: "http://{{tower_url}}/api/v2/organizations/{{org_id}}/job_templates/?name={{item}}"
          method: GET
          user: "{{login_user}}"
          password: "{{login_password}}"
          status_code:
                 - 201
                 - 200
          body_format: json
          validate_certs: no
          force_basic_auth: yes
        register : job_template_out
        loop: "{{job_template_name_list}}"

      - set_fact:
            job_template_id_list: "{{job_template_id_list + [job_template_out.results[indx].json.results[0].id]  | flatten}}"
        loop: "{{job_template_name_list}}"
        loop_control: 
            index_var: indx

      - set_fact:
            job_template_id_list: "{{job_template_id_list}}"
     

    rescue: 
      - name: Fault Error.
        debug:
          msg: "{{ ansible_failed_result.msg }}"

    